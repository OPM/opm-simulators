-- This reservoir simulation deck is made available under the Open Database
-- License: http://opendatacommons.org/licenses/odbl/1.0/. Any rights in
-- individual contents of the database are licensed under the Database Contents
-- License: http://opendatacommons.org/licenses/dbcl/1.0/

-- Enhanced test case for GCONSUMP efficiency factor handling - Complex hierarchy
--
-- Group hierarchy (simplified but comprehensive):
--                       FIELD (GEFAC=1.0, GCONSUMP=20/10)
--                         |
--                      PLAT-A (GEFAC=0.9, GCONSUMP=30/15)
--                       /            \
--        SUB-B (GEFAC=0.8,      SUB-D (GEFAC=0.7, no GCONSUMP)
--         GCONSUMP=100/50)             |
--              |                   WELL-E
--          WELL-C
--
-- This setup tests:
-- - Multiple sibling groups (SUB-B, SUB-D under PLAT-A)
-- - GCONSUMP at multiple hierarchy levels (FIELD, PLAT-A, SUB-B)
-- - Mixed scenarios (groups with/without GCONSUMP)
-- - Complex efficiency factor accumulation

RUNSPEC

TITLE
GCONSUMP_COMPLEX_EFFICIENCY_FACTOR_TEST

DIMENS
   3 3 2 /

OIL
WATER
GAS
DISGAS

METRIC

START
 1 'JAN' 2020 /

WELLDIMS
-- max wells, max cons/well, max groups, max wells/group
   3 2 6 3 /

EQLDIMS
 1 1*  25 1* 1 /

TABDIMS
-- NTSFUN NTPVT NSSFUN NPPVT NTFIP NRPVT NTEND NKRH
     1     1     50    60     1     60    1   1 /

UNIFOUT

GRID

INIT

DXV
1000 1000 1000 /

DYV
1000 1000 1000 /

DZV
50 50 /

TOPS
9*7000 /

PORO
18*0.2 /

PERMX
18*200 /

PERMY
18*200 /

PERMZ
18*20 /

PROPS

SWOF
-- Sw     Krw   Krow  Pcow
   0.2    0     1     0
   0.3    0.07  0.8   0
   1.0    1     0     0 /

SGOF
-- Sg     Krg   Krog  Pcog
   0      0     1     0
   0.05   0     0.8   0
   0.8    1     0     0 /

DENSITY
  800 1000 1 /

PVTW
  1 1.0 4.0E-5 0.5 0.0 /

PVDG
  1   1.0   0.1
100   0.1  0.15 /

PVTO
  1   100  1.2  1.0
      200  1.15 1.1 /
  10  100  1.25 0.9
      200  1.20 1.0 /
/

REGIONS

EQLNUM
18*1 /

SOLUTION

EQUIL
-- depth  press  woc    pcow  goc    pcog  rsvd  rvvd  N
  7020   270     7050   0     7000   0     1*    0     0 /

SUMMARY
FOPR
FGPR
FWPR
GOPR 'PLAT-A' /
GGPR 'SUB-B' /

SCHEDULE

GRUPTREE
'PLAT-A'    'FIELD' /
'SUB-B'     'PLAT-A' /
'SUB-D'     'PLAT-A' /
/

-- Group efficiency factors
GEFAC
'PLAT-A'    0.9 /
'SUB-B'     0.8 /
'SUB-D'     0.7 /
/

-- Gas consumption and import at multiple levels
GCONSUMP
'FIELD'     20   10 /
'PLAT-A'    30   15 /
'SUB-B'    100   50 /
/

WELSPECS
'WELL-C'    'SUB-B'   2   2   7000   'OIL' /
'WELL-E'    'SUB-D'   3   2   7000   'OIL' /
/

COMPDAT
'WELL-C'  2  2  1  2  'OPEN' 1* 1* 0.2 /
'WELL-E'  3  2  1  2  'OPEN' 1* 1* 0.2 /
/

WCONPROD
'WELL-C' 'OPEN' 'ORAT' 1000 4* 200 /
'WELL-E' 'OPEN' 'ORAT' 1000 4* 200 /
/

TSTEP
1 /

END
